(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,n,t){e.exports=t(52)},50:function(e,n,t){},52:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),c=t(19),r=t.n(c),u=t(2),l=t.n(u),i=(t(50),t(8)),m=t(3),d="/api/persons",s=function(e){return l.a.post(d,e).then(function(e){return e.data})},f=function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then(function(e){return e.data})},h=function(e){return l.a.delete("".concat(d,"/").concat(e)).then(function(e){return e.data})},b=function(e){var n=e.phrase,t=e.handle;return o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{value:n,onChange:t}))},p=function(e){return o.a.createElement("form",null,o.a.createElement("div",null,"Name: ",o.a.createElement("input",{value:e.newName,onChange:e.handleInputNameChange})),o.a.createElement("div",null,"Number: ",o.a.createElement("input",{value:e.newNumber,onChange:e.handleInputNumberChange})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",onClick:e.addNewName},"add")))},w=function(e){var n=e.personsToShow,t=e.delete_function;return o.a.createElement(o.a.Fragment,null,n.map(function(e){return o.a.createElement("p",{key:e.id},e.name," ",e.number," ",o.a.createElement("button",{onClick:function(){return t(e)}},"delete"))}))},E=function(e){var n=e.message;return null===n?null:o.a.createElement("div",{className:"notif"},n)},g=function(){var e=Object(a.useState)([]),n=Object(m.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),u=Object(m.a)(r,2),d=u[0],g=u[1],v=Object(a.useState)(""),N=Object(m.a)(v,2),j=N[0],O=N[1],C=Object(a.useState)(""),S=Object(m.a)(C,2),k=S[0],y=S[1],I=Object(a.useState)(!0),T=Object(m.a)(I,2),B=T[0],D=T[1],F=Object(a.useState)(null),R=Object(m.a)(F,2),A=R[0],J=R[1],M=B?t:t.filter(function(e){return e.name.toLowerCase().includes(k)});return Object(a.useEffect)(function(){console.log("effect"),l.a.get("/api/persons").then(function(e){console.log("promise fulfilled"),c(e.data)})},[]),o.a.createElement("div",null,o.a.createElement("h1",null,"Phonebook"),o.a.createElement(E,{message:A}),o.a.createElement(b,{phrase:k,handle:function(e){D(),y(e.target.value)}}),o.a.createElement("h2",null,"Add a new"),o.a.createElement(p,{newName:d,handleInputNameChange:function(e){g(e.target.value)},newNumber:j,handleInputNumberChange:function(e){O(e.target.value)},addNewName:function(e){e.preventDefault();var n,a={name:d,id:t.length+1,number:j};if(console.log(),t.some(function(e){return e.name===d&&e.number!==j})){if(console.log("NUMBER DIFFERENT"),console.log("newobject: ",a),window.confirm("".concat(a.name," is already added to the phonebook, replace the old number with new one?"))){a.id=t.find(function(e){return e.name===d}).id;var o=Object(i.a)(t);o=o.filter(function(e){return e.name!==d}),c(o.concat(a)),g(""),O(""),f(t.find(function(e){return e.name===d}).id,a).then(function(e){console.log("successful update")}).catch(function(e){J("".concat(a.name," has already been removed from the server")),setTimeout(function(){J(null)},2e3)})}}else t.some(function(e){return e.name===d&&e.number===j})?(console.log("BOTH SAME"),window.alert("".concat(d," is already added to phonebook"))):t.some(function(e){return e.name!==d&&e.number!==j})&&(c(t.concat(a)),g(""),O(""),s(a),n=a.name,J("'".concat(n,"' was added.")),setTimeout(function(){J(null)},5e3))}}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(w,{personsToShow:M,delete_function:function(e){if(window.confirm("Delete ".concat(e.name,"?"))){console.log("deleting ",e.name),console.log("old persons:",t);var n=Object(i.a)(t);n=n.filter(function(n){return n.id!==e.id}),h(e.id),c(n)}}}))};r.a.createRoot(document.getElementById("root")).render(o.a.createElement(g,null))}},[[20,2,1]]]);
//# sourceMappingURL=main.252e96a6.chunk.js.map