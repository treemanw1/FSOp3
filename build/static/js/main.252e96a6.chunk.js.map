{"version":3,"sources":["services/persons.js","components/Search.js","components/Form.js","components/Display.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","services_persons","newObject","axios","post","then","response","data","id","put","concat","delete","Search","_ref","phrase","handle","react_default","a","createElement","value","onChange","Form","props","newName","handleInputNameChange","newNumber","handleInputNumberChange","type","onClick","addNewName","Display","personsToShow","delete_function","Fragment","map","person","key","name","number","Notification","message","className","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","filterPhrase","setFilterPhrase","_useState9","_useState10","showFiltered","setShowFiltered","_useState11","_useState12","setMessage","filter","toLowerCase","includes","useEffect","console","log","get","components_Notification","components_Search","event","target","components_Form","preventDefault","nameAdding","length","some","e","window","confirm","find","p","newPersons","toConsumableArray","service","catch","error","setTimeout","alert","components_Display","ReactDOM","createRoot","document","getElementById","render","src_App"],"mappings":"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","file":"static/js/main.252e96a6.chunk.js","sourcesContent":["import axios from 'axios'\r\nimport React from 'react'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst delete_person = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, delete_person }","import React from 'react'\r\n\r\nconst Search = ({phrase, handle}) => {\r\n    return (\r\n        <div>filter shown with <input value={phrase} onChange={handle}/></div>\r\n    )\r\n}\r\n\r\nexport default Search","import React from 'react'\r\n\r\nconst Form = (props) => {\r\n    return (\r\n        <form>\r\n        <div>Name: <input value={props.newName} onChange={props.handleInputNameChange}/></div>\r\n        <div>Number: <input value={props.newNumber} onChange={props.handleInputNumberChange}/></div>\r\n        {/* <div><button type=\"submit\" onClick={() => props.addNewName(props.newName)}>add</button></div>  */}\r\n        <div><button type=\"submit\" onClick={props.addNewName}>add</button></div>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default Form","import React from 'react'\r\n\r\nconst Display = ({personsToShow, delete_function}) => {\r\n    return (\r\n        <>\r\n        {personsToShow.map(person => <p key={person.id}>{person.name} {person.number} <button onClick={() => delete_function(person)}>delete</button></p>)}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Display","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n    return (\r\n      <div className='notif'>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Notification","import React from 'react'\nimport { useState, useEffect } from 'react'\nimport service from './services/persons'\nimport axios from 'axios'\nimport Search from './components/Search'\nimport Form from './components/Form'\nimport Display from './components/Display'\nimport Notification from './components/Notification'\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filterPhrase, setFilterPhrase] = useState('')\n  const [showFiltered, setShowFiltered] = useState(true)\n  const [message, setMessage] = useState(null)\n\n  const handleInputNameChange =(event) => {\n    setNewName(event.target.value)\n  }\n  const handleInputNumberChange =(event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleFilter =(event) => {\n    setShowFiltered()\n    setFilterPhrase(event.target.value)\n  }\n  const personsToShow = showFiltered\n  ? persons\n  : persons.filter(person => person.name.toLowerCase().includes(filterPhrase))\n\n\n  const displayAddNotif = (name) => {\n    setMessage(\n      `'${name}' was added.`\n    )\n    setTimeout(() => {\n      setMessage(null)\n    }, 5000)\n  }\n\n  const addNewName =(event) => {\n    event.preventDefault()\n    let nameAdding = {\n      name: newName,\n      id: persons.length + 1,\n      number:newNumber\n    }\n    console.log();\n    if (persons.some(e => (e.name===newName && e.number!==newNumber))) {\n      console.log('NUMBER DIFFERENT');\n      console.log('newobject: ', nameAdding);\n      if (window.confirm(`${nameAdding.name} is already added to the phonebook, replace the old number with new one?`)) {\n        nameAdding.id = persons.find(p => (p.name===newName)).id\n        let newPersons = [...persons]\n        newPersons = newPersons.filter(function(p) {\n          return p.name !== newName;\n        })\n        setPersons(newPersons.concat(nameAdding))\n        setNewName('')\n        setNewNumber('')\n        service.update(persons.find(p => (p.name===newName)).id, nameAdding)\n          .then(response => {\n            console.log('successful update')\n          })\n          .catch(error => {\n          setMessage(\n            `${nameAdding.name} has already been removed from the server`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 2000)\n      })\n      }\n    }\n    else if (persons.some(e => (e.name===newName && e.number===newNumber))) {\n      console.log('BOTH SAME');\n      window.alert(`${newName} is already added to phonebook`)\n    }\n    else if (persons.some(e => (e.name!==newName && e.number!==newNumber))) {\n      setPersons(persons.concat(nameAdding))\n      setNewName('')\n      setNewNumber('')\n      service.create(nameAdding)\n      displayAddNotif(nameAdding.name)\n    }\n  }\n\n  const delete_entry = person => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      console.log('deleting ', person.name);\n      console.log('old persons:', persons);\n      let newPersons = [...persons]\n      newPersons = newPersons.filter(function(p) {\n        return p.id !== person.id;\n      })\n      service.delete_person(person.id)\n      setPersons(newPersons)\n    }\n  }\n\n  const hook = () => {\n    console.log('effect')\n    axios\n      .get('/api/persons')\n      .then(response => {\n        console.log('promise fulfilled')\n        setPersons(response.data)\n      })\n  }\n  useEffect(hook, [])\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={message}/>\n      <Search phrase={filterPhrase} handle={handleFilter}/>\n      <h2>Add a new</h2>\n      <Form newName={newName} handleInputNameChange={handleInputNameChange} newNumber={newNumber}\n       handleInputNumberChange={handleInputNumberChange} addNewName={addNewName}/>\n      <h2>Numbers</h2>\n      <Display personsToShow={personsToShow} delete_function={delete_entry} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport axios from 'axios'\nimport './index.css'\n\nimport App from './App'\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />)"],"sourceRoot":""}